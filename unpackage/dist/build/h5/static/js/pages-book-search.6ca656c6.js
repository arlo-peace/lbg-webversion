(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-book-search"],{"1cb9":function(t,e,i){"use strict";var a=i("67a3"),o=i.n(a);o.a},"67a3":function(t,e,i){var a=i("a1e9");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("4268a1fd",a,!0,{sourceMap:!1,shadowMode:!1})},"81b0":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var a={uniPopup:i("7999").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("css-loading",{ref:"cssLoading"}),i("v-uni-view",{staticClass:"head-content",attrs:{id:"head"}},[i("v-uni-view",{staticClass:"head-placeholder"}),i("v-uni-view",{staticClass:"head-search"},[i("v-uni-view",{staticClass:"head-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backUrl.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{src:"/static/imgs/back.png",mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"head-center"},[i("v-uni-text",{class:0==t.tabId?"sel":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setTabId(0)}}},[t._v("文字小说")]),i("v-uni-text",{class:1==t.tabId?"sel":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setTabId(1)}}},[t._v("有声小说")])],1),i("v-uni-view",{staticClass:"head-left"})],1),i("v-uni-view",{staticClass:"head-bottom"},[i("v-uni-view",{staticClass:"head-search-center"},[i("v-uni-input",{staticClass:"head-input",attrs:{focus:"true",value:t.search,"confirm-type":"search",type:"search",maxlength:"20",placeholder:"搜索一下,发现新世界..."},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputKey.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.searchKey(1)}}})],1),i("v-uni-view",{staticClass:"head-search-right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.searchKey(1)}}},[i("v-uni-image",{attrs:{src:"/static/imgs/search.png",mode:"aspectFill"}})],1)],1)],1),i("v-uni-view",{style:{height:t.topHeight+"px"}}),t.isShearchShow?i("v-uni-view",{staticClass:"top-content"},[t.logHide?i("v-uni-view",{staticClass:"search-log"},[i("v-uni-view",{staticClass:"search-log-top"},[i("v-uni-text",{staticClass:"line"}),i("v-uni-text",{staticClass:"c-title"},[t._v("历史搜索")]),i("v-uni-image",{attrs:{src:"/static/imgs/del.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delSearch.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"search-log-content"},t._l(t.logList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"search-log-list",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.searchLog(e.content)}}},[i("v-uni-text",[t._v(t._s(e.content))])],1)})),1)],1):t._e(),t.hotHide?i("v-uni-view",{staticClass:"search-log"},[i("v-uni-view",{staticClass:"search-log-top hot"},[i("v-uni-text",{staticClass:"line"}),i("v-uni-text",{staticClass:"c-title"},[t._v("热门搜索")])],1),0==t.tabId?t._l(t.hotTextList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"search-hot-content",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openPop(e)}}},[i("v-uni-view",{staticClass:"search-hot-list"},[a+1==1?i("v-uni-text",{staticClass:"search-hot-sort one"},[t._v(t._s(a+1))]):t._e(),a+1==2?i("v-uni-text",{staticClass:"search-hot-sort two"},[t._v(t._s(a+1))]):t._e(),a+1==3?i("v-uni-text",{staticClass:"search-hot-sort thr"},[t._v(t._s(a+1))]):t._e(),a+1>3?i("v-uni-text",{staticClass:"search-hot-sort"},[t._v(t._s(a+1))]):t._e(),i("v-uni-text",{staticClass:"search-hot-time"},[t._v(t._s(t.utils.timeTodate("Y/m/d",e.update_time)))]),i("v-uni-text",{staticClass:"search-hot-title"},[t._v(t._s(e.title))])],1)],1)})):t._e(),1==t.tabId?t._l(t.hotAudioList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"search-hot-content",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openPop(e)}}},[i("v-uni-view",{staticClass:"search-hot-list"},[a+1==1?i("v-uni-text",{staticClass:"search-hot-sort one"},[t._v(t._s(a+1))]):t._e(),a+1==2?i("v-uni-text",{staticClass:"search-hot-sort two"},[t._v(t._s(a+1))]):t._e(),a+1==3?i("v-uni-text",{staticClass:"search-hot-sort thr"},[t._v(t._s(a+1))]):t._e(),a+1>3?i("v-uni-text",{staticClass:"search-hot-sort"},[t._v(t._s(a+1))]):t._e(),i("v-uni-text",{staticClass:"search-hot-time"},[t._v(t._s(t.utils.timeTodate("Y/m/d",e.update_time)))]),i("v-uni-text",{staticClass:"search-hot-title"},[t._v(t._s(e.title))])],1)],1)})):t._e()],2):t._e()],1):i("v-uni-view",{staticClass:"video-list"},[0==t.tabId?[i("v-uni-view",{staticClass:"video-desc"},[t._v("共搜索到"+t._s(t.textCount)+"个与"),i("v-uni-text",{staticClass:"colorRed"},[t._v(t._s(t.search))]),t._v("相关的文字小说")],1),i("v-uni-view",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[t._l(t.textList,(function(e,a){return[i("v-uni-view",{key:a+"_0",staticClass:"text-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openPop(e)}}},[i("v-uni-view",{staticClass:"text-item-image"},[i("v-uni-image",{attrs:{src:e.url,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"text-item-content"},[i("v-uni-rich-text",{staticClass:"text-item-title",attrs:{nodes:e.title}},[t._v("...")]),i("v-uni-view",{staticClass:"text-item-description"},[t._v(t._s(e.description))]),i("v-uni-view",{staticClass:"text-item-price"},[0==e.alreadyBuy&&e.price>0?i("v-uni-view",{staticClass:"buy_btn"},[t._v("￥"+t._s(e.price))]):1==e.is_vip?i("v-uni-view",{staticClass:"buy_btn"},[t._v("VIP")]):0==e.price?i("v-uni-view",{staticClass:"buy_btn"},[t._v("免费")]):i("v-uni-view",{staticClass:"buy_btn"},[t._v(t._s(t.userInfo.isVip?"VIP免费":"已购买"))])],1)],1)],1)]}))],2)]:t._e(),1==t.tabId?[i("v-uni-view",{staticClass:"video-desc"},[t._v("共搜索到"+t._s(t.audioCount)+"个与"),i("v-uni-text",{staticClass:"colorRed"},[t._v(t._s(t.search))]),t._v("相关的有声小说")],1),i("v-uni-view",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[t._l(t.audioList,(function(e,a){return[i("v-uni-view",{key:a+"_0",staticClass:"audio-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openPop(e)}}},[i("v-uni-view",{staticClass:"audio-item-image"},[i("v-uni-image",{attrs:{src:e.url,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"audio-item-content"},[i("v-uni-rich-text",{staticClass:"audio-item-title",attrs:{nodes:e.title}},[t._v("...")]),i("v-uni-view",{staticClass:"audio-item-description"},[t._v(t._s(e.description))]),i("v-uni-view",{staticClass:"audio-item-price"},[0==e.alreadyBuy&&e.price>0?i("v-uni-view",{staticClass:"buy_btn"},[t._v("￥"+t._s(e.price))]):1==e.is_vip?i("v-uni-view",{staticClass:"buy_btn"},[t._v("VIP")]):0==e.price?i("v-uni-view",{staticClass:"buy_btn"},[t._v("免费")]):i("v-uni-view",{staticClass:"buy_btn"},[t._v(t._s(t.userInfo.isVip?"VIP免费":"已购买"))])],1)],1)],1)]}))],2)]:t._e(),t.isMoreTig?i("v-uni-view",{staticClass:"moreTig"},[t._v(t._s(t.isMoreMsg))]):t._e()],2),i("uni-popup",{ref:"popupNotice",attrs:{type:"center",backColor:"rgba(0,0,0,0.8)"}},[i("v-uni-view",{staticClass:"notice-bg"},[i("v-uni-image",{staticClass:"notice_title",attrs:{src:"/static/img/buy_head.png",mode:"aspectFill"}}),i("v-uni-view",{staticClass:"notice_title_text",class:{moreTitle:t.popData.title.length>10}},[i("v-uni-text",[t._v("购买小说:")]),i("v-uni-rich-text",{staticClass:"title1",attrs:{nodes:t.popData.title}},[t._v("...")])],1),i("v-uni-view",{staticClass:"notice_content"},[i("v-uni-view",{staticClass:"notice_content_line_1"},[i("v-uni-text",[t._v("实付"),i("v-uni-text",{staticClass:"redprice"},[t._v(t._s(t.popData.gold))]),t._v("金币")],1)],1),0==t.tabId?i("v-uni-view",{staticClass:"notice_content_line_2"},[i("v-uni-text",[i("v-uni-text",{staticClass:"maintext"},[t._v("￥"+t._s(t.popData.gold))]),t._v("购买可获得同专辑小说"),i("v-uni-text",{staticClass:"maintext"},[t._v(t._s(t.popData.count))]),t._v("部")],1)],1):t._e(),i("v-uni-view",{staticClass:"notice_content_line_3"},[i("v-uni-text",{staticClass:"buy_btn_small",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.buyBook.apply(void 0,arguments)}}},[t._v("立即支付")])],1),i("v-uni-view",{staticClass:"notice_content_line_4"},[i("v-uni-text",[t._v("可用金币： "+t._s(t.userInfo.corn))]),i("v-uni-text",{staticClass:"link",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoRecharge.apply(void 0,arguments)}}},[t._v("去充值 >")])],1),i("v-uni-view",{staticClass:"notice_content_line_5"},[i("v-uni-text",[t._v("价格随作品数量逐步递增,越早买越省钱")])],1)],1),i("v-uni-view",{staticStyle:{height:"50upx"}})],1)],1)],1)},n=[]},9011:function(t,e,i){"use strict";i.r(e);var a=i("81b0"),o=i("c565");for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("1cb9");var s=i("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"e53f8e8a",null,!1,a["a"],void 0);e["default"]=c.exports},a1e9:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".moreTig[data-v-e53f8e8a]{width:100%;text-align:center;color:#999;font-size:%?25?%;margin-top:%?20?%;padding-bottom:30px}.video-desc[data-v-e53f8e8a]{width:100%;text-align:center;font-size:12px;color:#999;margin:10px 0}.colorRed[data-v-e53f8e8a]{color:#b01a1c}.video-list[data-v-e53f8e8a]{width:97%;padding:1px 0 10px 3%}.one[data-v-e53f8e8a]{background:#b01a1c;color:#fff!important}.two[data-v-e53f8e8a]{background:#007aff;color:#fff!important}.thr[data-v-e53f8e8a]{background:#a83fdb;color:#fff!important}.search-hot-list[data-v-e53f8e8a]{width:92%;font-size:13px;border-radius:3px;margin:0 5% 0 3%}.search-hot-sort[data-v-e53f8e8a]{width:20px;height:20px;line-height:20px;display:inline-block;text-align:center;border-radius:50%;color:#777}.search-hot-title[data-v-e53f8e8a]{width:63%;padding:0 5% 0 0;height:20px;line-height:20px;display:inline-block;color:#999;float:right;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.search-hot-time[data-v-e53f8e8a]{width:22%;float:right;height:20px;line-height:20px;text-align:right}.search-hot-content[data-v-e53f8e8a]{margin-top:10px}.hot[data-v-e53f8e8a]{margin-bottom:18px}.search-log-content[data-v-e53f8e8a]{margin-top:18px}.search-log-content uni-view[data-v-e53f8e8a]{display:inline-block}.search-log-list[data-v-e53f8e8a]{width:25%;height:30px;line-height:30px;text-align:center;background:#f5f5f5;font-size:13px;border-radius:3px;color:#666;margin:0 0 5px 10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:0 5px}.search-log-top .line[data-v-e53f8e8a]{width:8px;height:15px;background-color:#ff8f00;margin-right:%?20?%;border-radius:8px}.c-title[data-v-e53f8e8a]{flex:1;color:#fff}.search-log-top uni-image[data-v-e53f8e8a]{width:20px;height:20px}.search-log-top[data-v-e53f8e8a]{height:30px;display:flex;flex-direction:row;justify-content:center;align-items:center}.search-log[data-v-e53f8e8a]{margin-top:10px;padding:0 %?35?%;font-size:17px;color:#666;font-weight:700}.top-content[data-v-e53f8e8a]{margin-top:10px}.head-content[data-v-e53f8e8a]{width:94%;background:#20202c;padding:0 3% %?10?%;text-align:center;position:fixed;top:0;z-index:999;border-bottom:1px solid rgba(0,0,0,.2);display:flex;flex-direction:column}.head-placeholder[data-v-e53f8e8a]{height:0;padding-top:%?16?%;box-sizing:initial}.head-bottom[data-v-e53f8e8a]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin:%?10?% 0}.head-left uni-image[data-v-e53f8e8a]{width:30px;height:30px;margin-top:1px;border-radius:50%;opacity:.6;filter:alpha(opacity=60)}.head-left[data-v-e53f8e8a]{width:30px}.head-center .sel[data-v-e53f8e8a]{font-weight:700;border-bottom:2px solid #f2692f}.head-center uni-text[data-v-e53f8e8a]{color:#fff;font-size:16px;margin:0 %?30?%;border-bottom:2px solid #20202c}.head-center[data-v-e53f8e8a]{height:35.5px;line-height:30px;flex:1}.head-search[data-v-e53f8e8a]{display:flex;flex-direction:row}.head-search-right uni-image[data-v-e53f8e8a]{width:32px;height:32px;border-radius:50%}.head-search-center[data-v-e53f8e8a]{flex:1;margin:0 %?20?%}.head-input[data-v-e53f8e8a]{height:32px;line-height:32px;background:#e5e5e5;border-radius:50px;font-size:%?26?%;padding:0 %?30?%;text-align:left;color:#666}.error[data-v-e53f8e8a]{margin-top:%?300?%}.audio-item[data-v-e53f8e8a]{width:100%;border-radius:10px;color:#fff;font-size:14px;display:inline-block;margin-bottom:10px;box-sizing:border-box;padding:10px 5px;background-color:#20202c;box-shadow:4px 4px 6px 0 hsla(0,0%,40.4%,.1)}.audio-item-image[data-v-e53f8e8a]{width:50px;height:50px;border-radius:50%;overflow:hidden;display:inline-block;vertical-align:top}.audio-item-content[data-v-e53f8e8a]{width:calc(100% - 60px);margin-left:10px;height:50px;display:inline-block;vertical-align:top;position:relative}.audio-item-title[data-v-e53f8e8a]{width:calc(100% - 70px);height:28px;display:inline-block;line-height:28px;font-size:%?26?%;overflow:hidden;text-overflow:ellipsis;justify-content:left;white-space:nowrap}.audio-item-description[data-v-e53f8e8a]{width:calc(100% - 70px);height:22px;display:inline-block;line-height:22px;color:#999;font-size:%?22?%;overflow:hidden;text-overflow:ellipsis;justify-content:left;white-space:nowrap;margin-top:-10px}.audio-item-price[data-v-e53f8e8a]{width:70px;position:absolute;right:0;top:-5px;height:50px;vertical-align:top;padding:5px;box-sizing:border-box}.buy_btn[data-v-e53f8e8a]{width:100%;line-height:40px;border-radius:10px;font-size:%?24?%;color:#fff;text-align:center;background:linear-gradient(270deg,#ff6034,#ee0a24)}.text-item[data-v-e53f8e8a]{width:100%;border-radius:10px;color:#fff;font-size:14px;display:inline-block;margin-bottom:10px;box-sizing:border-box;padding:10px 5px;background-color:#20202c;box-shadow:4px 4px 6px 0 hsla(0,0%,40.4%,.1)}.text-item-image[data-v-e53f8e8a]{width:50px;height:50px;border-radius:50%;overflow:hidden;display:inline-block;vertical-align:top}.text-item-content[data-v-e53f8e8a]{width:calc(100% - 60px);margin-left:10px;height:50px;display:inline-block;vertical-align:top;position:relative}.text-item-title[data-v-e53f8e8a]{width:calc(100% - 70px);height:28px;display:inline-block;line-height:28px;font-size:%?26?%;overflow:hidden;text-overflow:ellipsis;justify-content:left;white-space:nowrap}.text-item-description[data-v-e53f8e8a]{width:calc(100% - 70px);height:22px;display:inline-block;line-height:22px;color:#999;font-size:%?22?%;overflow:hidden;text-overflow:ellipsis;justify-content:left;white-space:nowrap;margin-top:-10px}.text-item-price[data-v-e53f8e8a]{width:70px;position:absolute;right:0;top:-5px;height:50px;vertical-align:top;padding:5px;box-sizing:border-box}.notice_content[data-v-e53f8e8a]{width:90%;height:%?500?%;padding:0 5%;margin-top:%?25?%;position:relative}.notice_title[data-v-e53f8e8a]{width:100%;height:%?146?%}.notice_title_text[data-v-e53f8e8a]{position:absolute;top:0;left:0;width:100%;height:%?146?%;font-size:%?36?%;text-align:center;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center}.notice_title_text.moreTitle[data-v-e53f8e8a]{line-height:%?48?%}.notice_title_text .title1[data-v-e53f8e8a]{font-size:%?34?%;font-weight:700}.notice-bg[data-v-e53f8e8a]{width:%?600?%;border-radius:%?60?%;background-color:#fff}.notice_content_line_1[data-v-e53f8e8a]{width:100%;text-align:center;font-size:%?40?%;height:40px;line-height:30px;font-weight:500}.notice_content_line_1 .redprice[data-v-e53f8e8a]{font-size:%?56?%;color:#f9221d;margin:0 5px}.notice_content_line_2[data-v-e53f8e8a]{width:100%;text-align:center;font-size:%?32?%;height:90px;line-height:%?40?%;font-weight:500}.notice_content_line_2 .maintext[data-v-e53f8e8a]{font-size:%?28?%;margin:0 3px}.notice_content_line_3[data-v-e53f8e8a]{width:100%;height:46px;padding:3px 10px;box-sizing:border-box}.notice_content_line_3 .buy_btn_small[data-v-e53f8e8a]{width:100%;height:100%;line-height:40px;border-radius:20px;font-size:%?26?%;color:#fff;text-align:center;display:inline-block;background:linear-gradient(270deg,#ff6034,#ee0a24)}.notice_content_line_4[data-v-e53f8e8a]{width:100%;height:40px;line-height:40px;font-size:%?32?%;font-weight:400;text-align:center}.notice_content_line_4 .link[data-v-e53f8e8a]{color:#f9221d;margin-left:10px}.notice_content_line_5[data-v-e53f8e8a]{width:100%;height:30px;line-height:30px;font-size:%?24?%;font-weight:400;text-align:center;color:#999}",""]),t.exports=e},a810:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d401"),i("d3b7"),i("25f0"),i("e25e"),i("ac1f"),i("5319");var a={friendlyDate:function(t){var e=10==t.toString().length?parseInt(t+"000"):t,i=Date.now(),a=Math.floor((i-parseInt(e))/1e3),o=Math.floor(a/60),n=Math.floor(o/60),s=Math.floor(n/24),c=Math.floor(s/30),l=Math.floor(c/12),r="",d=0;return l>0?(r="year",d=l):c>0?(r="month",d=c):s>0?(r="day",d=s):n>0?(r="hour",d=n):o>0?(r="minute",d=o):(r="second",d=0===a?a=1:a),{year:"%n% 年前",month:"%n% 月前",day:"%n% 天前",hour:"%n% 小时前",minute:"%n% 分钟前",second:"%n% 秒前"}[r].replace("%n%",d)},timeTodate:function(t,e){var i=10==e.toString().length?parseInt(e+"000"):e,a=new Date;a.getYear(),a.getFullYear(),a.getMonth(),a.getDate(),a.getDay(),a.getTime(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds(),a.toLocaleDateString();a.toLocaleTimeString();a.toLocaleString();var o=new Date(i),n=o.getSeconds(),s=("0"+o.getMinutes()).substr(-2),c=o.getHours()<10?"0"+o.getHours():o.getHours(),l=("0"+o.getDate()).substr(-2),r=("0"+(o.getMonth()+1)).substr(-2),d=o.getFullYear();return t.replace("Y",d).replace("m",r).replace("d",l).replace("H",c).replace("i",s).replace("s",n).replace("index","自定义替换值")}};e.default=a},c565:function(t,e,i){"use strict";i.r(e);var a=i("f136"),o=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},f136:function(t,e,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac1f"),i("e9c4"),i("841c"),i("99af");var o,n=a(i("79ec")),s=a(i("a810")),c={data:function(){return{isMoreTig:!1,isMoreMsg:"——— 我是有底线的 ———",isMore:!1,topHeight:76,did:0,logHide:!1,hotHide:!1,isShearchShow:!0,logList:{},hotTextList:{},hotAudioList:{},isSearchs:1,tabId:0,search:"",userId:0,utils:s.default,textList:[],textCount:0,audioList:[],audioCount:0,scrollTop:0,userInfo:{nickname:"无名",is_vip:0,money:0},page:1,api:n.default,popData:{title:"",gold:0,id:0,count:0,type:"album"}}},onLoad:function(t){t&&t.type&&(this.tabId=1==t.type?1:0),this._showLoading("加载中,请稍后..."),o=this;var e=n.default.getLogins();0!=e&&(o.userId=e.userId),o.getUserInfo(),uni.getStorage({key:"mobileDid_"+n.default.appkey,success:function(t){o.did=t.data},complete:function(){o.getHotSearch()}})},mounted:function(){var t=uni.createSelectorQuery().in(this),e=setTimeout((function(){t.select("#head").boundingClientRect((function(t){o.topHeight=t.height})).exec(),clearTimeout(e)}),100)},methods:{getUserInfo:function(){uni.request({url:n.default.apiData.getInfo,method:"POST",data:{userId:o.userId},header:{"Content-type":"application/x-www-form-urlencoded"},success:function(t){200==t.data.Code?o.userInfo=t.data.Data:n.default.delLogins()},fail:function(){n.default.showToast("服务器连接失败，请检查网络是否正常",3e3)}})},setTabId:function(t){o.tabId=t},delSearch:function(){uni.showModal({content:"确认清空搜索记录吗？",cancelText:"考虑一下",confirmText:"清空记录",success:function(t){t.confirm?o.delSearchLog():t.cancel}})},gotoRecharge:function(){n.default.jumpUrl("/pages/recharge/recharge","new")},delSearchLog:function(){var t=this;this._showLoading("处理中..."),uni.request({url:n.default.apiData.emptyBookSearch,method:"POST",header:{"Content-type":"application/x-www-form-urlencoded"},data:{did:o.did},success:function(e){200==e.data.Code&&(o.logHide=!1),t._hideLoading()},fail:function(){t._hideLoading(),n.default.showToast("服务器连接失败，请检查网络是否正常",2e3)}})},playVideo:function(t){uni.setStorage({key:"vid",data:t,fail:function(){o.back("服务器连接失败，请检查网络是否正常")},complete:function(){n.default.jumpUrl("/pages/video/play?type="+JSON.stringify({url:"/pages/video/search",t:"new"}),"new")}})},inputKey:function(t){o.search=t.detail.value},searchLog:function(t){o.search=t,o.searchKey(1)},openPop:function(t){1!=t.is_vip||o.userInfo.isVip?0==t.alreadyBuy&&t.price>0?(o.popData.title=t.title,o.popData.gold=t.price,o.popData.id=0==o.tabId?t.parentId:t.id,o.popData.count=t.count,this.$nextTick((function(){o.$refs["popupNotice"].open()}))):n.default.jumpUrl("/pages/book/book_"+(0==o.tabId?"album":"audio")+"_detail?id="+t.id,"new"):uni.showModal({title:"温馨提示",content:"您需要开通VIP才能"+(0==o.tabId?"查看":"收听")+"该内容",confirmText:"立即开通VIP",cancelText:"再考虑一下",success:function(t){t.confirm&&n.default.jumpUrl("/pages/recharge/recharge?type=2&book_"+(0==o.tabId?"album":"audio")+"_id="+o.popData.id,"new")}})},buyBook:function(){uni.request({url:n.default.apiData.buyBook,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{bookId:o.popData.id,userId:o.userId,type:0==o.tabId?"album":"audio",did:o.did},success:function(t){200!=t.data.Code?n.default.showToast(t.data.Msg,2e3):(n.default.showToast(t.data.Msg,2e3),o.$refs["popupNotice"].close(),n.default.jumpUrl("/pages/book/book_"+(0==o.tabId?"album":"audio")+"_detail?id="+o.popData.id,"new"))},fail:function(){n.default.showToast("网络连接失败，请检查网络是否正常",2e3)}})},searchKey:function(t){if(1==t&&(o.page=1),this._showLoading("搜索中,请稍后..."),0==o.search.length)return n.default.showToast("请输入搜索关键字",2e3);if(o.isSearchs||0!=o.userId)1==o.page&&(o.textList=[],o.textCount=0,o.audioList=[],o.audioCount=0,o.isMore=!1),o.isMoreMsg="——— 加载数据中 ———",uni.request({url:n.default.apiData.searchBook,method:"POST",header:{"Content-type":"application/x-www-form-urlencoded"},data:{uid:o.userId,did:o.did,key:o.search,page:o.page},success:function(e){var i=e.data;if(201==i.Code)return n.default.showToast(i.Msg,2e3);if(202==i.Code)return t&&1==o.page?n.default.showToast(i.Msg,2e3):n.default.showToast("已到顶到胃了"),o.isMoreMsg="——— 我是有底线的 ———",o.page=o.page-1,o.isMore=!0,!1;o.page>1&&(o.isMoreTig=!0),i.Data.text.length>0&&(1==o.page?o.textList=i.Data.text:o.textList=o.textList.concat(i.Data.text),0==i.Data.text.length&&(o.isMore=!1)),o.textCount=i.Data.text_count,i.Data.audio.length>0&&(1==o.page?o.audioList=i.Data.audio:o.audioList=o.audioList.concat(i.Data.audio),0==i.Data.audio.length&&(o.isMore=!1)),o.audioCount=i.Data.audio_count,o.isShearchShow=!1,o.isMoreMsg="——— 上滑加载更多 ———";var a=setTimeout((function(){o.getHotSearch(),clearTimeout(a)}),300)},fail:function(){o.back("服务器连接失败，请检查网络是否正常")}});else{n.default.showToast("禁止游客使用搜索功能，请先登录",2e3);var e=setTimeout((function(){n.default.jumpUrl("/pages/login/login","newx"),clearTimeout(e)}),1e3)}},getHotSearch:function(){uni.request({url:n.default.apiData.getHotBookSearch,method:"POST",data:{userId:o.userId,did:o.did},header:{"Content-type":"application/x-www-form-urlencoded"},success:function(t){var e=t.data.Data;o.isSearchs=e.isSearchs,e.logList.length&&(o.logList=e.logList,o.logHide=!0),e.hotTextList.length&&(o.hotTextList=e.hotTextList),e.hotAudioList.length&&(o.hotAudioList=e.hotAudioList),(e.hotTextList.length||e.hotAudioList.length)&&(o.hotHide=!0)},fail:function(){o.back("服务器连接失败，请检查网络是否正常")},complete:function(){o._hideLoading()}})},backUrl:function(){o.isShearchShow?n.default.jumpUrl("/pages/book/book","old"):(o.page=1,o.videoList=[],o.isShearchShow=!0,o.isMore=!1)},back:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(0!=t.length){n.default.showToast(t);var e=setTimeout((function(){uni.navigateBack(),clearTimeout(e)}),1500)}}},onReachBottom:function(){o.isMore||(o.page++,o.searchKey(0))},onPageScroll:function(t){var e=t.scrollTop;o.scrollTop=e}};e.default=c}}]);