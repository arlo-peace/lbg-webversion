(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-member-watch_log"],{"55a8":function(t,e,i){"use strict";i.r(e);var a=i("cf1f"),o=i("9a56");for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("cf67");var s=i("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"7550bc1f",null,!1,a["a"],void 0);e["default"]=c.exports},5631:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".moreTig[data-v-7550bc1f]{text-align:center;color:#ccc;font-size:%?25?%;margin:%?30?% 0 %?50?% 0}.watch-radius[data-v-7550bc1f]{width:18px;height:18px;background:#ff8f00;float:left;border-radius:50%;margin-left:-11px;margin-top:30px}.video-class[data-v-7550bc1f]{font-size:13px}.video-time[data-v-7550bc1f]{font-size:13px}.video-title[data-v-7550bc1f]{font-size:16px;color:#ccc!important;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;\n\t/*background: #1AAD19; */height:33px;line-height:33px}.video-info uni-view[data-v-7550bc1f]{width:100%;float:left;color:#999}.video-img uni-image[data-v-7550bc1f]{width:100%;height:100%;border-radius:10px;box-shadow:0 4px 6px 0 rgba(0,0,0,.5)}.video-img[data-v-7550bc1f]{width:35%;padding:0 0 0 2%;height:80px}.video-info[data-v-7550bc1f]{width:58%;float:right}.watch-content uni-view[data-v-7550bc1f]{display:inline-block}.watch-content[data-v-7550bc1f]{width:90%;margin:0 5%;border-left:4px solid #ff8f00;padding:5px 0 0 0}.watch-list[data-v-7550bc1f]{width:100%;padding-bottom:15px}.select[data-v-7550bc1f]{border-bottom:2px solid #fff;padding-bottom:5px}.content-head[data-v-7550bc1f]{position:fixed;width:100%;height:30px;line-height:30px;top:27px;text-align:center;color:#fff;z-index:10}.watch-head[data-v-7550bc1f]{width:100%;text-align:center;background-color:#20202c;position:fixed;z-index:5}.watch-head uni-view[data-v-7550bc1f]{display:inline-block;width:60px;font-size:16px;color:#fff}.del-log[data-v-7550bc1f]{background:rgba(0,0,0,.5);padding:5px 2px 5px 8px;border-radius:50px 0 0 50px;position:absolute;right:0}",""]),t.exports=e},"9a56":function(t,e,i){"use strict";i.r(e);var a=i("d34c"),o=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},a810:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d401"),i("d3b7"),i("25f0"),i("e25e"),i("ac1f"),i("5319");var a={friendlyDate:function(t){var e=10==t.toString().length?parseInt(t+"000"):t,i=Date.now(),a=Math.floor((i-parseInt(e))/1e3),o=Math.floor(a/60),n=Math.floor(o/60),s=Math.floor(n/24),c=Math.floor(s/30),l=Math.floor(c/12),r="",d=0;return l>0?(r="year",d=l):c>0?(r="month",d=c):s>0?(r="day",d=s):n>0?(r="hour",d=n):o>0?(r="minute",d=o):(r="second",d=0===a?a=1:a),{year:"%n% 年前",month:"%n% 月前",day:"%n% 天前",hour:"%n% 小时前",minute:"%n% 分钟前",second:"%n% 秒前"}[r].replace("%n%",d)},timeTodate:function(t,e){var i=10==e.toString().length?parseInt(e+"000"):e,a=new Date;a.getYear(),a.getFullYear(),a.getMonth(),a.getDate(),a.getDay(),a.getTime(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds(),a.toLocaleDateString();a.toLocaleTimeString();a.toLocaleString();var o=new Date(i),n=o.getSeconds(),s=("0"+o.getMinutes()).substr(-2),c=o.getHours()<10?"0"+o.getHours():o.getHours(),l=("0"+o.getDate()).substr(-2),r=("0"+(o.getMonth()+1)).substr(-2),d=o.getFullYear();return t.replace("Y",d).replace("m",r).replace("d",l).replace("H",c).replace("i",s).replace("s",n).replace("index","自定义替换值")}};e.default=a},c5eb:function(t,e,i){var a=i("5631");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("97912534",a,!0,{sourceMap:!1,shadowMode:!1})},cf1f:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"bg"},[i("v-uni-view",{staticClass:"content-head",style:{top:t.top+"px"}},[t._v("长视频记录")]),i("v-uni-view",{staticClass:"watch-head",style:{padding:t.top+45+"px 0 5px 0"}},[i("v-uni-view",{class:1==t.tab?"select":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggle(1)}}},[t._v("看过")]),i("v-uni-view",{class:2==t.tab?"select":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggle(2)}}},[t._v("赞过")]),i("v-uni-view",{class:3==t.tab?"select":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggle(3)}}},[t._v("买过")]),t.isShowDel?i("v-uni-view",{staticClass:"del-log",staticStyle:{"font-size":"12px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delWatch.apply(void 0,arguments)}}},[t._v("清除足迹")]):t._e()],1),i("v-uni-view",{staticClass:"watch-list",style:{padding:t.bgHeight+0+"px 0 0 0"}},[t.isShowTig?t._e():i("v-uni-view",{staticClass:"watch-content"}),t._l(t.logList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"watch-content",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.playVideo(e.videoId)}}},[i("v-uni-view",{staticClass:"watch-radius"}),i("v-uni-view",{staticClass:"video-img"},[i("v-uni-image",{attrs:{src:e.thumbnail,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"video-info"},[i("v-uni-view",{staticClass:"video-title video-info-video-title"},[t._v(t._s(e.videoTitle))]),i("v-uni-view",{staticClass:"video-class"},[1!=t.tab?i("v-uni-text",{staticStyle:{background:"#D89720",padding:"0 5px",color:"#FFFFFF","font-size":"11px","border-radius":"3px"}},[t._v(t._s(e.playTime))]):t._e(),e.gold>0?i("v-uni-text",{staticStyle:{float:"right",color:"rgba(255,154,53,1)"}},[t._v(t._s(e.gold)+" 金币")]):i("v-uni-text",{staticStyle:{float:"right",color:"#1AAD19"}},[t._v("免费")])],1),i("v-uni-view",{staticClass:"video-time"},[1==t.tab?i("v-uni-view",[i("v-uni-text",{staticStyle:{background:"#D89720",padding:"0 5px",color:"#FFFFFF","font-size":"11px","border-radius":"3px"}},[t._v(t._s(e.playTime))]),i("v-uni-text",{staticStyle:{float:"right"}},[t._v(t._s(t.utils.friendlyDate(e.addTime)))])],1):2==t.tab?i("v-uni-view",[i("v-uni-view",{staticStyle:{color:"#ff962f",width:"40%","margin-top":"2px"}},[i("v-uni-image",{staticStyle:{width:"13px",height:"13px",float:"left",margin:"3px 3px 0 0"},attrs:{src:"/static/imgs/like.png"}}),t._v(t._s(e.likes))],1),i("v-uni-text",{staticStyle:{float:"right"}},[t._v(t._s(t.utils.timeTodate("Y/m/d",e.addTime)))])],1):i("v-uni-view",{staticStyle:{"margin-top":"4px","font-size":"12px"}},[i("v-uni-text",[t._v(t._s(e.endMsg))]),i("v-uni-text",{staticStyle:{float:"right"}},[t._v(t._s(e.addTime))])],1)],1)],1)],1)})),t.isShowTig?i("v-uni-view",{staticStyle:{width:"100%",height:"500upx","margin-top":"100px","text-align":"center"}},[i("v-uni-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:"/static/empty.png"}}),i("v-uni-view",{staticStyle:{width:"100%","font-size":"25upx",color:"#999","margin-top":"30upx"}},[t._v(t._s(t.noData))])],1):t._e(),t.isMoreTig?i("v-uni-view",{staticClass:"moreTig"},[t._v("——— 我是有底线的 ———")]):t._e()],2),i("css-loading",{ref:"cssLoading"})],1)},o=[]},cf67:function(t,e,i){"use strict";var a=i("c5eb"),o=i.n(a);o.a},d34c:function(t,e,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac1f"),i("e9c4"),i("99af");var o,n=a(i("79ec")),s=a(i("a810")),c={data:function(){return{top:27,bgHeight:111,userId:0,page:1,logList:[],isShowTig:!1,isMoreTig:!1,more:!1,tab:1,utils:s.default,noData:"暂无足迹，去看部视频试试吧",isShowDel:!0,path:{url:"/pages/member/member",type:"tab"}}},onLoad:function(t){o=this,o._showLoading("加载中...");var e=uni.getSystemInfoSync();o.top=e.safeArea.top+7,void 0!=t.path&&(o.path=JSON.parse(t.path));var i=n.default.getLogins();!1===i?o.skipUrl():(o.userId=i.userId,o.getWatch())},mounted:function(){var t=uni.createSelectorQuery().in(this);t.select(".watch-head").boundingClientRect((function(t){o.bgHeight=t.bottom})).exec()},methods:{playVideo:function(t){uni.setStorage({key:"vid",data:t,success:function(){n.default.jumpUrl("/pages/video/play?type="+JSON.stringify({url:"/pages/member/watch_log",t:"new"}),"new")},fail:function(){n.default.showToast("服务器连接失败，请检查网络是否正常")}})},getWatch:function(){uni.request({url:n.default.apiData.getWatchLog,method:"POST",data:{userId:o.userId,page:o.page,type:o.tab},header:{"Content-type":"application/x-www-form-urlencoded"},success:function(t){var e=t.data.Data.list;o.more||(o.logList=[]),e.length>0?o.logList=o.logList.concat(e):(o.page--,o.more?o.isMoreTig=!0:o.isShowTig=!0),o._hideLoading()},fail:function(){n.default.showToast("服务器连接失败，请检查网络是否正常")}})},toggle:function(t){o._showLoading("加载中..."),o.logList=[],o.startOpt(),o.tab=t,1==t?(o.isShowDel=!0,o.noData="挥一挥手机，不带走一部视频"):2==t?(o.isShowDel=!1,o.noData="万水千山总是情，赞部视频行不行"):(o.isShowDel=!1,o.noData="等有钱了我要买两部，看一部，扔一部"),o.getWatch()},startOpt:function(){o.page=1,o.isShowTig=!1,o.isMoreTig=!1,o.more=!1},delWatch:function(){uni.showModal({title:"提示",content:"确认要清除所有足迹吗？",cancelText:"点错了",confirmText:"一键清除",success:function(t){o._showLoading("处理中..."),t.confirm?uni.request({url:n.default.apiData.delWatchLog+"/type/1/userId/"+o.userId,method:"GET",header:{"Content-type":"application/x-www-form-urlencoded"},success:function(t){var e=t.data;n.default.showToast(e.Msg,2e3),200==e.Code&&(o.logList=[],o.tab=1,o.page=1,o.isShowTig=!0,o.isMoreTig=!1,o.more=!1,o.noData="挥一挥手机，不带走一部视频")},fail:function(){n.default.showToast("服务器连接失败，请检查网络是否正常")}}):t.cancel&&o._hideLoading()}})},skipUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/pages/login/login",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;1==e?uni.reLaunch({url:t}):uni.navigateTo({url:t})}},onReachBottom:function(){o.isMoreTig||(o._showLoading("加载中..."),o.page++,o.more=!0,o.isShowTig=!1,o.getWatch())},onPullDownRefresh:function(){o.startOpt(),o.getWatch(),uni.stopPullDownRefresh()},onBackPress:function(t){return n.default.jumpUrl(o.path.url,o.path.type),!0}};e.default=c}}]);